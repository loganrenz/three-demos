import type { CompressedNode, Edge, WordLengthLimits, WordlistPayload } from './lexistack-dictionary'

const RAW_WORDS = [
  'ABLE',
  'ABOUT',
  'ACT',
  'ACTED',
  'ACTING',
  'ACTS',
  'ADAPT',
  'ADAPTS',
  'ALIGN',
  'ALIGNED',
  'ALIGNS',
  'ALERT',
  'ALERTS',
  'ALERTED',
  'APPLE',
  'APPLES',
  'APPLY',
  'APPLIED',
  'APPLIES',
  'ASK',
  'ASKS',
  'ASKED',
  'ASKING',
  'BASIC',
  'BASICS',
  'BUILD',
  'BUILDS',
  'BUILT',
  'BRAVE',
  'BRAVES',
  'BRAVED',
  'BRIGHT',
  'BRIGHTS',
  'BRIGHTEN',
  'BREEZE',
  'BREEZES',
  'CART',
  'CARTS',
  'CARVE',
  'CARVES',
  'CARVED',
  'CARRY',
  'CARRIES',
  'CARRIED',
  'CLEAR',
  'CLEARS',
  'CLEARED',
  'CLIMB',
  'CLIMBS',
  'CLIMBED',
  'CLOUD',
  'CLOUDS',
  'COAST',
  'COASTS',
  'COASTED',
  'CRAFT',
  'CRAFTS',
  'CRAFTED',
  'CRASH',
  'CRASHED',
  'CRASHES',
  'CREATE',
  'CREATES',
  'CREATED',
  'DAISY',
  'DAISIES',
  'DANCE',
  'DANCES',
  'DANCED',
  'DREAM',
  'DREAMS',
  'DREAMED',
  'DRIFT',
  'DRIFTS',
  'DRIFTED',
  'EAGER',
  'EAGERLY',
  'EARTH',
  'EARTHS',
  'ECHO',
  'ECHOES',
  'ECHOED',
  'EMBER',
  'EMBERS',
  'ENTER',
  'ENTERS',
  'ENTERED',
  'EQUAL',
  'EQUALS',
  'EVADE',
  'EVADED',
  'EVADES',
  'FAIR',
  'FAIRS',
  'FAIRED',
  'FIELD',
  'FIELDS',
  'FILL',
  'FILLS',
  'FILLED',
  'FLASH',
  'FLASHED',
  'FLASHES',
  'FLOAT',
  'FLOATS',
  'FLOATED',
  'FLORA',
  'FLORAS',
  'FOAM',
  'FOAMS',
  'FOCUSED',
  'FOCUSES',
  'FORGE',
  'FORGED',
  'FORGES',
  'FRAME',
  'FRAMES',
  'FRAMED',
  'FROST',
  'FROSTS',
  'GLOW',
  'GLOWS',
  'GLOWED',
  'GLASS',
  'GLASSES',
  'GLIDE',
  'GLIDED',
  'GLIDES',
  'GRASS',
  'GRASSES',
  'GROVE',
  'GROVES',
  'HARBOR',
  'HARBORS',
  'HARMONY',
  'HARMONIES',
  'HAZE',
  'HAZES',
  'HAZED',
  'HEART',
  'HEARTS',
  'HOVER',
  'HOVERED',
  'HOVERS',
  'HONEY',
  'HONEYS',
  'IRON',
  'IRONS',
  'ISLE',
  'ISLES',
  'IMAGE',
  'IMAGES',
  'INPUT',
  'INPUTS',
  'JAZZ',
  'JAZZES',
  'JUMP',
  'JUMPS',
  'JUMPED',
  'KIN',
  'KINS',
  'KNIT',
  'KNITS',
  'KNITTED',
  'LAKE',
  'LAKES',
  'LATCH',
  'LATCHES',
  'LATCHED',
  'LEAF',
  'LEAVES',
  'LEVEL',
  'LEVELS',
  'LEVELED',
  'LIGHT',
  'LIGHTS',
  'LIGHTED',
  'LINK',
  'LINKS',
  'LINKED',
  'LOOP',
  'LOOPS',
  'LOOPED',
  'LUNAR',
  'LUNARS',
  'MAPLE',
  'MAPLES',
  'MARCH',
  'MARCHED',
  'MARCHES',
  'MEADOW',
  'MEADOWS',
  'MIGHT',
  'MIGHTS',
  'MINT',
  'MINTS',
  'MIST',
  'MISTS',
  'MOMENT',
  'MOMENTS',
  'MORPH',
  'MORPHS',
  'MORPHED',
  'NEST',
  'NESTS',
  'NESTED',
  'NIGHT',
  'NIGHTS',
  'NURSE',
  'NURSED',
  'NURSES',
  'OAK',
  'OAKS',
  'OASIS',
  'OCEAN',
  'OCEANS',
  'OLIVE',
  'OLIVES',
  'ORBIT',
  'ORBITS',
  'ORBITED',
  'ORCHID',
  'ORCHIDS',
  'PALM',
  'PALMS',
  'PAUSE',
  'PAUSED',
  'PAUSES',
  'PEAK',
  'PEAKS',
  'PEARL',
  'PEARLS',
  'PEPPER',
  'PEPPERS',
  'PHASE',
  'PHASES',
  'PHASED',
  'PILOT',
  'PILOTS',
  'PILOTED',
  'PINCH',
  'PINCHES',
  'PINCHED',
  'PIXEL',
  'PIXELS',
  'PLANT',
  'PLANTS',
  'PLANTED',
  'PLATE',
  'PLATES',
  'PLUMES',
  'POINT',
  'POINTS',
  'POINTED',
  'POLAR',
  'POLARS',
  'PRISM',
  'PRISMS',
  'PULSE',
  'PULSES',
  'PULSED',
  'QUARTZ',
  'QUEEN',
  'QUEENS',
  'QUEST',
  'QUESTS',
  'QUIET',
  'QUIETS',
  'QUIETED',
  'QUILL',
  'QUILLS',
  'QUILT',
  'QUILTS',
  'RANCH',
  'RANCHES',
  'RANGE',
  'RANGES',
  'RANGED',
  'RAPID',
  'RAPIDS',
  'RAY',
  'RAYS',
  'REACH',
  'REACHED',
  'REACHES',
  'REACT',
  'REACTS',
  'REACTED',
  'REED',
  'REEDS',
  'REEL',
  'REELS',
  'RHYME',
  'RHYMES',
  'RHYMED',
  'RICE',
  'RIDGE',
  'RIDGES',
  'RIVER',
  'RIVERS',
  'ROCK',
  'ROCKS',
  'ROCKED',
  'ROOT',
  'ROOTS',
  'ROOTED',
  'ROSE',
  'ROSES',
  'ROUND',
  'ROUNDS',
  'ROUNDED',
  'RUST',
  'RUSTS',
  'SAGE',
  'SAGES',
  'SAIL',
  'SAILS',
  'SAILED',
  'SALT',
  'SALTS',
  'SALTED',
  'SCENE',
  'SCENES',
  'SCOPE',
  'SCOPES',
  'SCOPED',
  'SCROLL',
  'SCROLLS',
  'SEA',
  'SEAS',
  'SHELL',
  'SHELLS',
  'SHIFT',
  'SHIFTS',
  'SHIFTED',
  'SHINE',
  'SHINES',
  'SHINED',
  'SHORE',
  'SHORES',
  'SING',
  'SINGS',
  'SANG',
  'SUNG',
  'SKY',
  'SKIES',
  'SLATE',
  'SLATES',
  'SLATED',
  'SMOKE',
  'SMOKES',
  'SMOKED',
  'SNAP',
  'SNAPS',
  'SNAPPED',
  'SNOW',
  'SNOWS',
  'SNOWED',
  'SOLAR',
  'SOLARS',
  'SONG',
  'SONGS',
  'SOUND',
  'SOUNDS',
  'SOUNDING',
  'SPARK',
  'SPARKS',
  'SPARKED',
  'SPEAR',
  'SPEARS',
  'SPEARED',
  'SPELL',
  'SPELLS',
  'SPELLED',
  'SPICE',
  'SPICES',
  'SPICED',
  'SPIRIT',
  'SPIRITS',
  'SPORE',
  'SPORES',
  'SPRING',
  'SPRINGS',
  'SPRUNG',
  'STONE',
  'STONES',
  'STONED',
  'STORM',
  'STORMS',
  'STORMED',
  'STREAM',
  'STREAMS',
  'STREAMED',
  'SWIRL',
  'SWIRLS',
  'SWIRLED',
  'TASTE',
  'TASTES',
  'TASTED',
  'TETHER',
  'TETHERS',
  'TETHERED',
  'THORN',
  'THORNS',
  'THRIVE',
  'THRIVES',
  'THRIVED',
  'TIDE',
  'TIDES',
  'TILTED',
  'TILT',
  'TILTS',
  'TONE',
  'TONES',
  'TONED',
  'TOWER',
  'TOWERS',
  'TOWERED',
  'TRACE',
  'TRACES',
  'TRACED',
  'TRIBE',
  'TRIBES',
  'TRUNK',
  'TRUNKS',
  'TWIG',
  'TWIGS',
  'TWIST',
  'TWISTS',
  'TWISTED',
  'UMBRA',
  'UMBRAS',
  'UNION',
  'UNIONS',
  'UNITY',
  'URBAN',
  'URBANIZE',
  'URBANIZED',
  'URGES',
  'URGE',
  'URGED',
  'VAULT',
  'VAULTS',
  'VAULTED',
  'VEIN',
  'VEINS',
  'VELVET',
  'VELVETS',
  'VINE',
  'VINES',
  'VISION',
  'VISIONS',
  'VOICE',
  'VOICES',
  'VOICED',
  'WAVE',
  'WAVES',
  'WAVED',
  'WEAVE',
  'WEAVES',
  'WOVE',
  'WEAVED',
  'WHISPER',
  'WHISPERS',
  'WHISPERED',
  'WIND',
  'WINDS',
  'WINDED',
  'WING',
  'WINGS',
  'WISP',
  'WISPS',
  'WONDER',
  'WONDERS',
  'WONDERED',
  'WORLD',
  'WORLDS',
  'WRAP',
  'WRAPS',
  'WRAPPED',
  'YEARN',
  'YEARNED',
  'YEARNS',
  'YELL',
  'YELLED',
  'YELLS'
]

const PROFANITY = ['HELL', 'DAMN']

const LIMITS: WordLengthLimits = { minLength: 2, maxLength: 12 }

const buildCompressedTrie = (words: string[]): { nodes: CompressedNode[]; rootIndex: number } => {
  const root: { edges: Record<string, number>; word?: boolean } = { edges: {} }
  const nodes: { edges: Record<string, number>; word?: boolean }[] = [root]

  for (const raw of words) {
    const word = raw.trim().toUpperCase()
    let current = root
    for (const char of word) {
      if (current.edges[char] === undefined) {
        current.edges[char] = nodes.length
        nodes.push({ edges: {} })
      }
      current = nodes[current.edges[char]]
    }
    current.word = true
  }

  const compressed: CompressedNode[] = nodes.map((node) => ({
    edges: Object.entries(node.edges) as Edge[],
    word: node.word ? 1 : undefined
  }))

  return { nodes: compressed, rootIndex: 0 }
}

const { nodes, rootIndex } = buildCompressedTrie(Array.from(new Set(RAW_WORDS)))

export const WORDLIST_EN: WordlistPayload = {
  locale: 'en-US',
  version: '2024.06.01',
  rootIndex,
  nodes,
  profanity: PROFANITY,
  limits: LIMITS
}

export default WORDLIST_EN
